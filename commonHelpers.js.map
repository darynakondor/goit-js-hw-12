{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getGallery(tag, page = 1) {\n    const params = {\n        key: '44594941-2a4acc61a8cc3b7fa403a0877',\n        q: tag,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15\n    };\n    const urlParams = new URLSearchParams(params).toString();\n\n    const response = await axios.get(`?${urlParams}`);\n    return response.data;\n}","const gallery = document.querySelector('.gallery')\nimport en from '../languages/en.json';\nimport ua from '../languages/ua.json';\nexport function renderPhotosList(photos) {\n    let html = ''\n    photos.forEach(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        html += `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n              />\n            </a>s\n            <ul class=\"info\">s\n                <li class=\"item\">\n                    <p class=\"bold\">Likes</p>\n                    <p>${likes}</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"bold\">Views</p>\n                    <p>${views}</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"bold\">Comments</p>\n                    <p>${comments}</p>\n                </li>\n                <li class=\"item\">\n                    <p class=\"bold\">Downloads</p>\n                    <p>${downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `);\n    gallery.insertAdjacentHTML(\"beforeend\", html);\n}\n\nfunction saveLanguageCode(langugageCode) {\n    localStorage.setItem('language', langugageCode)\n}\n\nfunction getLanguageCode() {\n     return localStorage.getItem('language') || 'en'\n}\n  \nfunction loadTranslations(lang) {\n  return lang == \"ua\" ? ua : en\n}\n  \nfunction translatePage(translations) {\n  document.querySelectorAll('[data-translate]').forEach(element => {\n    const key = element.getAttribute('data-translate');\n    if (element.tagName === 'INPUT' && element.placeholder === 'comments') {\n      element.placeholder = translations[key] || element.placeholder;\n    } else {\n      element.innerHTML = translations[key] || element.textContent;\n    }\n  });\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  const languageLinks = document.querySelectorAll('.languages .link')\n\n  const savedLang = getLanguageCode();\n  document.documentElement.lang = savedLang;\n\n  \n  const translation = loadTranslations(savedLang);\n  translatePage(translation);\n\n  languageLinks.forEach(link => {\n    link.addEventListener('click', (event) => {\n      const selectedLang = event.target.getAttribute('data-lang');\n      saveLanguageCode(selectedLang);\n    });\n  });\n});\n","import { getGallery } from \"./js/pixabay-api\";\nimport { renderPhotosList } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    galleryItem: document.querySelector('.gallery-item')\n}\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nrefs.form.addEventListener('submit', async (ev) => {\n    ev.preventDefault();\n    currentQuery = ev.target.elements['search'].value;\n    refs.gallery.innerHTML = '';\n    refs.loader.style.display = 'block';\n    refs.loadMoreBtn.style.display = 'none';\n    currentPage = 1;\n    if (currentQuery !== '') {\n        try {\n            const data = await getGallery(currentQuery);\n            renderPhotosList(data.hits);\n            refs.loader.style.display = 'none';\n            refs.loadMoreBtn.style.display = 'inline-block';\n            hideLoadMoreBtn(data.totalHits);\n\n            if (!data.hits.length) {\n                iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topRight'\n                });\n            }\n\n            lightbox.refresh();\n        } catch (error) {\n            console.error('Error fetching gallery:', error);\n        }\n    } else {\n        refs.loader.style.display = 'none';\n        refs.loadMoreBtn.style.display = 'none';\n    }\n})\n\nrefs.gallery.addEventListener('click', (e) => {\n    e.preventDefault();\n});\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nasync function loadMore() {\n    try {\n        currentPage++;\n        const data = await getGallery(currentQuery, currentPage);\n        refs.loader.style.display = 'none';\n        renderPhotosList(data.hits);\n        hideLoadMoreBtn(data.totalHits);\n        lightbox.refresh();\n        smoothScroll();\n    } catch {\n        console.error('Error fetching gallery:', error);\n    }\n}\n\nrefs.loadMoreBtn.addEventListener('click', loadMore);\n\nfunction hideLoadMoreBtn(totalHits) {\n    const totalImages = currentPage * 15;\n    if (totalImages >= totalHits) {\n        refs.loadMoreBtn.style.display = 'none';\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight'\n        });\n    }\n}\n\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    const rect = galleryItem.getBoundingClientRect();\n    const { height: cardHeight } = rect;\n    window.scrollBy({\n        top: cardHeight * 2 + 237.5,\n        behavior: 'smooth',\n    });\n        \n}\n"],"names":["axios","getGallery","tag","page","params","urlParams","gallery","renderPhotosList","photos","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","saveLanguageCode","langugageCode","getLanguageCode","loadTranslations","lang","ua","en","translatePage","translations","element","key","languageLinks","savedLang","translation","link","event","selectedLang","refs","currentPage","currentQuery","ev","data","hideLoadMoreBtn","iziToast","lightbox","error","e","SimpleLightbox","loadMore","smoothScroll","totalHits","rect","cardHeight"],"mappings":"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"}